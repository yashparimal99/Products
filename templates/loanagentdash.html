<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Field Agent Verification Dashboard - DigiBank</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Bootstrap & Icons -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />

  <style>
    :root{
      --brand:#0B4D83;
      --accent:#97144D;
      --bg-soft:#f4f6fb;
      --card:#ffffff;
      --ink:#1f2933;
      --muted:#6b7a90;
      --border:#dde4f2;
      --success:#16a34a;
      --warning:#f59e0b;
      --danger:#dc2626;
      --info:#0ea5e9;
    }

    *{box-sizing:border-box;}

    body{
      margin:0;
      font-family:'Segoe UI',system-ui,-apple-system,BlinkMacSystemFont,sans-serif;
      background:radial-gradient(circle at top,#e0f2fe 0,#f8fafc 45%,#eef2ff 100%);
      color:var(--ink);
    }

    .page-wrapper{
      min-height:100vh;
      padding:18px 16px;
    }

    /* Top bar */
    .top-bar{
      max-width:1320px;
      margin:0 auto 16px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      flex-wrap:wrap;
    }

    .top-title{
      display:flex;
      align-items:center;
      gap:12px;
    }

    .top-icon{
      width:44px;
      height:44px;
      border-radius:16px;
      background:linear-gradient(135deg,var(--brand),var(--accent));
      display:flex;
      align-items:center;
      justify-content:center;
      color:#fff;
      box-shadow:0 6px 16px rgba(15,23,42,.35);
      font-size:22px;
    }

    .top-text h1{
      font-size:20px;
      margin:0;
    }
    .top-text span{
      font-size:12px;
      color:var(--muted);
    }

    .top-right{
      display:flex;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
      justify-content:flex-end;
    }

    .pill-badge{
      padding:6px 12px;
      border-radius:999px;
      font-size:11px;
      background:#eef2ff;
      color:var(--brand);
      display:inline-flex;
      align-items:center;
      gap:6px;
    }

    .avatar-agent{
      display:flex;
      align-items:center;
      gap:8px;
      padding:6px 10px;
      border-radius:999px;
      background:#ffffff;
      border:1px solid #d1d9f0;
      box-shadow:0 2px 6px rgba(15,23,42,.08);
      font-size:12px;
    }
    .avatar-circle{
      width:26px;
      height:26px;
      border-radius:50%;
      background:linear-gradient(135deg,#38bdf8,#0ea5e9);
      color:#fff;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:13px;
      font-weight:600;
    }
    .avatar-agent span{
      display:block;
      line-height:1.2;
    }
    .avatar-agent small{
      color:var(--muted);
      font-size:11px;
    }

    /* Main shell */
    .dash-shell{
      max-width:1320px;
      margin:0 auto;
      background:rgba(255,255,255,0.98);
      border-radius:18px;
      border:1px solid #dde4f2;
      box-shadow:0 18px 40px rgba(15,23,42,.18);
      display:grid;
      grid-template-columns:minmax(280px,360px) minmax(0,1fr);
      overflow:hidden;
    }

    /* Left rail – Assigned visits */
    .left-rail{
      background:linear-gradient(180deg,#eef4ff,#f8fafc);
      border-right:1px solid var(--border);
      display:flex;
      flex-direction:column;
    }

    .left-rail-header{
      padding:14px 16px 10px;
      border-bottom:1px solid var(--border);
    }
    .left-rail-header h2{
      font-size:14px;
      margin:0 0 4px;
      display:flex;
      align-items:center;
      gap:6px;
    }
    .left-rail-header span{
      font-size:11px;
      color:var(--muted);
    }

    .segment-tabs{
      display:flex;
      gap:6px;
      margin-top:8px;
      flex-wrap:wrap;
    }
    .seg-pill{
      font-size:11px;
      padding:4px 10px;
      border-radius:999px;
      border:1px solid #cbd5f5;
      background:#ffffff;
      color:#4b5563;
      cursor:pointer;
      display:inline-flex;
      align-items:center;
      gap:4px;
    }
    .seg-pill.active{
      background:var(--brand);
      color:#fff;
      border-color:var(--brand);
    }

    .left-search{
      padding:8px 16px 10px;
      border-bottom:1px solid var(--border);
    }
    .left-search .input-group{
      border-radius:999px;
      overflow:hidden;
      box-shadow:0 2px 6px rgba(15,23,42,.12);
    }
    .left-search input{
      border:none;
      font-size:12px;
      padding:8px 10px;
    }
    .left-search .input-group-text{
      border:none;
      background:#ffffff;
      font-size:13px;
      color:var(--muted);
    }

    .visit-list{
      padding:10px 12px 12px;
      overflow-y:auto;
      max-height:calc(100vh - 210px);
    }

    .visit-card{
      background:#ffffff;
      border-radius:12px;
      padding:10px 10px 8px;
      margin-bottom:8px;
      border:1px solid transparent;
      cursor:pointer;
      transition:all .15s;
      position:relative;
    }
    .visit-card:hover{
      border-color:#c7d2fe;
      box-shadow:0 4px 10px rgba(15,23,42,.12);
      transform:translateY(-1px);
    }
    .visit-card.active{
      border-color:var(--brand);
      box-shadow:0 0 0 1px rgba(11,77,131,.5);
      background:#f5f7ff;
    }

    .visit-title-row{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:6px;
      margin-bottom:4px;
    }
    .visit-name{
      display:flex;
      align-items:center;
      gap:6px;
      font-size:13px;
      font-weight:600;
    }
    .visit-status-pill{
      font-size:10px;
      padding:2px 8px;
      border-radius:999px;
      display:inline-flex;
      align-items:center;
      gap:4px;
    }
    .vs-pending{background:#fef3c7;color:#92400e;}
    .vs-inprogress{background:#e0f2fe;color:#075985;}
    .vs-completed{background:#dcfce7;color:#166534;}

    .visit-meta{
      font-size:11px;
      color:var(--muted);
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      margin-bottom:3px;
    }
    .visit-tags{
      font-size:10px;
      display:flex;
      flex-wrap:wrap;
      gap:4px;
    }
    .visit-tag{
      padding:2px 7px;
      border-radius:999px;
      background:#eef2ff;
      color:#4c51bf;
    }

    /* Right panel */
    .right-panel{
      background:#f9fafc;
      display:flex;
      flex-direction:column;
    }

    .right-header{
      padding:13px 16px 10px;
      border-bottom:1px solid var(--border);
      display:flex;
      align-items:center;
      justify-content:space-between;
      flex-wrap:wrap;
      gap:10px;
    }

    .rh-left{
      display:flex;
      flex-direction:column;
      gap:4px;
    }
    .rh-left-title{
      font-size:16px;
      font-weight:600;
      display:flex;
      align-items:center;
      gap:8px;
    }
    .rh-left-title span{
      font-size:13px;
      font-weight:500;
    }
    .rh-left sub{
      font-size:11px;
      color:var(--muted);
    }

    .rh-badges{
      display:flex;
      flex-wrap:wrap;
      gap:6px;
    }

    .rh-actions{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      justify-content:flex-end;
    }
    .btn-sm-pill{
      font-size:11px;
      border-radius:999px;
      padding:6px 12px;
      border:none;
      display:inline-flex;
      align-items:center;
      gap:6px;
      cursor:pointer;
      transition:.15s;
    }
    .btn-start{background:#e0f2fe;color:#075985;border:1px solid #bae6fd;}
    .btn-start.active{background:#075985;color:#e0f2fe;}
    .btn-verify{background:var(--success);color:#fff;}
    .btn-verify:hover{box-shadow:0 3px 8px rgba(22,163,74,.45);}
    .btn-notok{background:#fee2e2;color:#b91c1c;border:1px solid #fecaca;}
    .btn-clarify{background:#fef9c3;color:#854d0e;border:1px solid #fde68a;}

    .right-body{
      padding:12px 14px 16px;
      overflow-y:auto;
      max-height:calc(100vh - 120px);
    }

    .grid-2{
      display:grid;
      grid-template-columns:1.6fr 1.4fr;
      gap:10px;
    }

    .card-box{
      background:#ffffff;
      border-radius:12px;
      border:1px solid var(--border);
      padding:10px 11px 9px;
      margin-bottom:10px;
    }
    .card-head{
      display:flex;
      align-items:center;
      justify-content:space-between;
      margin-bottom:6px;
    }
    .card-title{
      font-size:13px;
      font-weight:600;
      display:flex;
      align-items:center;
      gap:6px;
      color:#111827;
    }
    .card-title i{
      font-size:13px;
      color:var(--brand);
    }
    .mini-pill{
      font-size:10px;
      padding:2px 8px;
      border-radius:999px;
      background:#eef2ff;
      color:#4c51bf;
    }

    .summary-list{
      list-style:none;
      padding:0;
      margin:0;
      font-size:12px;
    }
    .summary-list li{
      display:flex;
      justify-content:space-between;
      gap:8px;
      padding:3px 0;
      border-bottom:1px dashed #e5e7eb;
    }
    .summary-label{color:var(--muted);}
    .summary-value{text-align:right;font-weight:600;}

    .subtext{
      font-size:11px;
      color:var(--muted);
    }

    .map-box{
      border-radius:10px;
      border:1px dashed #d4d4d8;
      padding:8px 9px;
      margin-top:4px;
      background:#fafafa;
      font-size:11px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:8px;
    }
    .btn-map{
      font-size:11px;
      border-radius:999px;
      padding:4px 10px;
      border:none;
      background:#0ea5e9;
      color:#fff;
      display:inline-flex;
      align-items:center;
      gap:5px;
      cursor:pointer;
    }

    /* Checklist */
    .checklist{
      font-size:12px;
      display:flex;
      flex-direction:column;
      gap:4px;
    }
    .check-item{
      display:flex;
      align-items:flex-start;
      gap:6px;
      padding:3px 0;
    }
    .check-item input{
      margin-top:3px;
    }
    .check-label{
      flex:1;
    }
    .check-note{
      font-size:11px;
      color:var(--muted);
    }

    /* Report form */
    .form-label-sm{
      font-size:11px;
      color:var(--muted);
      margin-bottom:2px;
    }
    .form-control-sm,
    .form-select-sm{
      font-size:12px;
      padding:5px 7px;
      border-radius:8px;
    }
    .textarea-sm{
      min-height:70px;
      resize:vertical;
    }

    .upload-zone{
      border:1px dashed #d1d5db;
      border-radius:10px;
      padding:8px 10px;
      font-size:11px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:8px;
      background:#f9fafb;
    }
    .upload-left{
      display:flex;
      align-items:center;
      gap:8px;
    }
    .upload-icon{
      width:30px;
      height:30px;
      border-radius:10px;
      background:#e0f2fe;
      display:flex;
      align-items:center;
      justify-content:center;
      color:#0369a1;
      font-size:16px;
    }
    .upload-zone input[type="file"]{
      font-size:11px;
    }

    .badge-status-small{
      font-size:10px;
      border-radius:999px;
      padding:2px 7px;
      display:inline-flex;
      align-items:center;
      gap:4px;
    }
    .bs-draft{background:#f3f4f6;color:#4b5563;}
    .bs-sent{background:#dcfce7;color:#166534;}

    /* Toast */
    .toast-box{
      position:fixed;
      right:18px;
      bottom:18px;
      z-index:9999;
      min-width:220px;
      max-width:280px;
      padding:10px 12px;
      border-radius:10px;
      background:#16a34a;
      color:#f9fafb;
      font-size:12px;
      box-shadow:0 8px 20px rgba(22,163,74,.5);
      display:none;
      align-items:flex-start;
      gap:8px;
      animation:slideUp .25s ease-out;
    }
    .toast-box i{
      font-size:16px;
      margin-top:2px;
    }
    @keyframes slideUp{
      from{transform:translateY(12px);opacity:0;}
      to{transform:translateY(0);opacity:1;}
    }

    /* Scrollbars */
    .visit-list::-webkit-scrollbar,
    .right-body::-webkit-scrollbar{
      width:6px;
    }
    .visit-list::-webkit-scrollbar-thumb,
    .right-body::-webkit-scrollbar-thumb{
      background:#d4d4f5;
      border-radius:999px;
    }

    @media(max-width:992px){
      .dash-shell{grid-template-columns:1fr;}
      .left-rail{
        max-height:360px;
        border-right:none;
        border-bottom:1px solid var(--border);
      }
      .visit-list{max-height:240px;}
      .right-body{max-height:none;}
    }

    @media(max-width:576px){
      .top-bar{
        flex-direction:column;
        align-items:flex-start;
      }
      .right-header{
        flex-direction:column;
        align-items:flex-start;
      }
      .rh-actions{justify-content:flex-start;}
      .grid-2{grid-template-columns:1fr;}
    }
  </style>
</head>
<body>
<div class="page-wrapper">

  <!-- Top bar -->
  <div class="top-bar">
    <div class="top-title">
      <div class="top-icon">
        <i class="bi bi-signpost-split"></i>
      </div>
      <div class="top-text">
        <h1>Field Agent Verification Dashboard</h1>
        <span>View your assigned property / land visits and submit verification reports.</span>
      </div>
    </div>

    <div class="top-right">
      <div class="pill-badge">
        <i class="bi bi-calendar-check"></i>
        Today: 3 visits · 1 completed
      </div>
      <div class="avatar-agent">
        <div class="avatar-circle">MP</div>
        <div>
          <span>Mahesh Patil</span>
          <small>Field Agent · Pune Region</small>
        </div>
      </div>
    </div>
  </div>

  <!-- Shell -->
  <div class="dash-shell">

    <!-- LEFT: Visit list -->
    <aside class="left-rail">
      <div class="left-rail-header">
        <h2>
          Assigned Visits
          <span class="badge-status-small bs-draft">
            <i class="bi bi-circle-fill" style="font-size:6px;"></i> 2 Pending
          </span>
        </h2>
        <span>Select a case on the left to view details and submit your report.</span>

        <div class="segment-tabs">
          <button class="seg-pill active"><i class="bi bi-sun"></i> Today</button>
          <button class="seg-pill"><i class="bi bi-arrow-right-circle"></i> Upcoming</button>
          <button class="seg-pill"><i class="bi bi-check2-circle"></i> Completed</button>
        </div>
      </div>

      <div class="left-search">
        <div class="input-group input-group-sm">
          <span class="input-group-text"><i class="bi bi-search"></i></span>
          <input type="text" class="form-control" placeholder="Search by name / app no / area">
        </div>
      </div>

      <div class="visit-list" id="visitList">
        <!-- Visit 1 -->
        <div class="visit-card active" data-id="1">
          <div class="visit-title-row">
            <div>
              <div class="visit-name">
                <i class="bi bi-person-circle text-primary"></i>
                <span>Himanshu Shelke</span>
              </div>
              <div class="visit-meta">
                <span>#APP-2025-00128</span>
                <span>Home Loan · Property</span>
              </div>
            </div>
            <div class="text-end">
              <span class="visit-status-pill vs-pending">
                <i class="bi bi-hourglass-split"></i> Pending
              </span>
              <div style="font-size:11px;margin-top:2px;">
                Today · 3:30 PM
              </div>
            </div>
          </div>
          <div class="visit-tags">
            <span class="visit-tag">Pune · Bavdhan</span>
            <span class="visit-tag">G+11 Tower</span>
            <span class="visit-tag">Manager: Shaikh</span>
          </div>
        </div>

        <!-- Visit 2 -->
        <div class="visit-card" data-id="2">
          <div class="visit-title-row">
            <div>
              <div class="visit-name">
                <i class="bi bi-person-circle text-primary"></i>
                <span>Arshad Shaikh</span>
              </div>
              <div class="visit-meta">
                <span>#APP-2025-00130</span>
                <span>Business Loan · Shop</span>
              </div>
            </div>
            <div class="text-end">
              <span class="visit-status-pill vs-inprogress">
                <i class="bi bi-play-circle"></i> In progress
              </span>
              <div style="font-size:11px;margin-top:2px;">
                Today · 12:00 PM
              </div>
            </div>
          </div>
          <div class="visit-tags">
            <span class="visit-tag">Pune · Kothrud</span>
            <span class="visit-tag">Retail Shop</span>
          </div>
        </div>

        <!-- Visit 3 -->
        <div class="visit-card" data-id="3">
          <div class="visit-title-row">
            <div>
              <div class="visit-name">
                <i class="bi bi-person-circle text-primary"></i>
                <span>Jyoti Chougale</span>
              </div>
              <div class="visit-meta">
                <span>#APP-2025-00132</span>
                <span>Home Loan · Land</span>
              </div>
            </div>
            <div class="text-end">
              <span class="visit-status-pill vs-completed">
                <i class="bi bi-check2"></i> Completed
              </span>
              <div style="font-size:11px;margin-top:2px;">
                Yesterday · 5:40 PM
              </div>
            </div>
          </div>
          <div class="visit-tags">
            <span class="visit-tag">Satara · Village</span>
            <span class="visit-tag">1.5 Acre Agricultural</span>
          </div>
        </div>
      </div>
    </aside>

    <!-- RIGHT: Visit detail & report -->
    <main class="right-panel">
      <!-- Header -->
      <div class="right-header">
        <div class="rh-left">
          <div class="rh-left-title">
            <span id="caseTitle">Visit: Himanshu Shelke – Bavdhan</span>
          </div>
          <sub id="caseSub">
            Application #APP-2025-00128 · Home Loan · Residential Property
          </sub>
          <div class="rh-badges">
            <span class="visit-status-pill vs-pending" id="visitStatusBadge">
              <i class="bi bi-hourglass-split"></i> Pending Visit
            </span>
            <span class="visit-status-pill vs-inprogress d-none" id="visitStatusInProgress">
              <i class="bi bi-geo-alt"></i> On Site / In Progress
            </span>
            <span class="visit-status-pill vs-completed d-none" id="visitStatusCompleted">
              <i class="bi bi-check2-circle"></i> Report Submitted
            </span>
          </div>
        </div>

        <div class="rh-actions">
          <button class="btn-sm-pill btn-start" id="btnStartVisit">
            <i class="bi bi-play-circle"></i> Start Visit
          </button>
          <button class="btn-sm-pill btn-verify" id="btnMarkVerified">
            <i class="bi bi-check2-circle"></i> Mark as Verified
          </button>
          <button class="btn-sm-pill btn-notok" id="btnMarkNotOk">
            <i class="bi bi-x-octagon"></i> Not OK / Negative
          </button>
          <button class="btn-sm-pill btn-clarify" id="btnNeedClarification">
            <i class="bi bi-arrow-counterclockwise"></i> Need Clarification
          </button>
        </div>
      </div>

      <!-- Body -->
      <div class="right-body">
        <div class="grid-2">
          <!-- LEFT: Applicant + Property + Checklist -->
          <div>
            <!-- Applicant Summary -->
            <div class="card-box">
              <div class="card-head">
                <div class="card-title">
                  <i class="bi bi-person-badge"></i> Applicant & Loan Summary
                </div>
                <span class="mini-pill">Read-only from system</span>
              </div>
              <ul class="summary-list">
                <li>
                  <span class="summary-label">Applicant</span>
                  <span class="summary-value" id="applicantName">Himanshu Shelke</span>
                </li>
                <li>
                  <span class="summary-label">Loan Type</span>
                  <span class="summary-value" id="loanType">Home Loan – Property</span>
                </li>
                <li>
                  <span class="summary-label">Loan Amount</span>
                  <span class="summary-value" id="loanAmount">₹ 25,00,000</span>
                </li>
                <li>
                  <span class="summary-label">Manager</span>
                  <span class="summary-value" id="managerName">Manager Shaikh</span>
                </li>
                <li>
                  <span class="summary-label">Scheduled Time</span>
                  <span class="summary-value" id="visitTime">Today · 3:30 PM</span>
                </li>
              </ul>
            </div>

            <!-- Property Details -->
            <div class="card-box">
              <div class="card-head">
                <div class="card-title">
                  <i class="bi bi-house-door"></i> Property Details
                </div>
                <span class="mini-pill">To verify on site</span>
              </div>
              <ul class="summary-list">
                <li>
                  <span class="summary-label">Property Type</span>
                  <span class="summary-value" id="propType">Residential Flat</span>
                </li>
                <li>
                  <span class="summary-label">Project / Building</span>
                  <span class="summary-value" id="propProject">Skyline Residency · Wing B</span>
                </li>
                <li>
                  <span class="summary-label">Carpet Area</span>
                  <span class="summary-value" id="propArea">980 sq.ft</span>
                </li>
                <li>
                  <span class="summary-label">Address</span>
                  <span class="summary-value" id="propAddress">
                    Bavdhan, Pune – 411021
                  </span>
                </li>
              </ul>

              <div class="map-box">
                <div>
                  <div><strong>Location Check</strong></div>
                  <div>Confirm that the actual location matches the address and pin on record.</div>
                </div>
                <button class="btn-map">
                  <i class="bi bi-geo-alt"></i> View on Map
                </button>
              </div>
            </div>

            <!-- Visit Checklist -->
            <div class="card-box">
              <div class="card-head">
                <div class="card-title">
                  <i class="bi bi-list-check"></i> Site Visit Checklist
                </div>
                <span class="mini-pill">Tick items you have verified</span>
              </div>

              <div class="checklist" id="checklist">
                <label class="check-item">
                  <input type="checkbox" class="form-check-input">
                  <div class="check-label">
                    KYC / Name board matches applicant name?
                    <div class="check-note">Check name on doorbell, society records or shop board.</div>
                  </div>
                </label>

                <label class="check-item">
                  <input type="checkbox" class="form-check-input">
                  <div class="check-label">
                    Property is built as per description?
                    <div class="check-note">Confirm flat / shop type, floor, approximate area.</div>
                  </div>
                </label>

                <label class="check-item">
                  <input type="checkbox" class="form-check-input">
                  <div class="check-label">
                    Occupancy status verified?
                    <div class="check-note">Self-occupied / rented / vacant – mention in remarks.</div>
                  </div>
                </label>

                <label class="check-item">
                  <input type="checkbox" class="form-check-input">
                  <div class="check-label">
                    Surrounding area & access road acceptable?
                    <div class="check-note">Check approach road, locality, any visible risks.</div>
                  </div>
                </label>

                <label class="check-item">
                  <input type="checkbox" class="form-check-input">
                  <div class="check-label">
                    No visible legal / encroachment issues?
                    <div class="check-note">Any disputes, notices, or obvious red flags observed.</div>
                  </div>
                </label>
              </div>

              <p class="subtext mt-2">
                <i class="bi bi-info-circle"></i>
                Manager will see which checklist points are ticked along with your final report.
              </p>
            </div>
          </div>

          <!-- RIGHT: Agent report form -->
          <div>
            <!-- Valuation & Risk -->
            <div class="card-box">
              <div class="card-head">
                <div class="card-title">
                  <i class="bi bi-clipboard-data"></i> Valuation & Risk Observation
                </div>
                <span class="mini-pill">You can update these values</span>
              </div>

              <div class="mb-2">
                <label class="form-label-sm">Estimated Market Value (₹)</label>
                <input type="number" class="form-control form-control-sm" id="fieldValuation"
                       placeholder="Eg. 4,800,000">
              </div>

              <div class="mb-2">
                <label class="form-label-sm">Overall Property Condition</label>
                <select class="form-select form-select-sm" id="conditionSelect">
                  <option value="">Select condition</option>
                  <option value="excellent">Excellent – New / well maintained</option>
                  <option value="good">Good – Minor wear & tear</option>
                  <option value="average">Average – Needs some repair</option>
                  <option value="poor">Poor – Major repairs / unfinished</option>
                </select>
              </div>

              <div class="mb-2">
                <label class="form-label-sm">Neighbourhood & Surroundings Risk</label>
                <select class="form-select form-select-sm" id="neighbourRisk">
                  <option value="">Select risk level</option>
                  <option value="low">Low – Residential / safe locality</option>
                  <option value="medium">Medium – Mixed / semi-commercial</option>
                  <option value="high">High – Industrial / very remote / risky</option>
                </select>
              </div>

              <p class="subtext mb-0">
                <i class="bi bi-lightbulb"></i>
                Your valuation & condition feedback will help manager decide final LTV and approval.
              </p>
            </div>

            <!-- Photos / Document Upload -->
            <div class="card-box">
              <div class="card-head">
                <div class="card-title">
                  <i class="bi bi-camera"></i> Site Photos & Documents
                </div>
                <span class="mini-pill">Upload clear, sharp images</span>
              </div>

              <div class="upload-zone mb-2">
                <div class="upload-left">
                  <div class="upload-icon">
                    <i class="bi bi-images"></i>
                  </div>
                  <div>
                    <div><strong>Property Photos</strong></div>
                    <div>Front view, entrance, surroundings, any important observations.</div>
                  </div>
                </div>
                <input type="file" id="photoUpload" multiple accept="image/*">
              </div>

              <div class="upload-zone">
                <div class="upload-left">
                  <div class="upload-icon" style="background:#fee2e2;color:#b91c1c;">
                    <i class="bi bi-file-earmark-arrow-up"></i>
                  </div>
                  <div>
                    <div><strong>Additional Docs (Optional)</strong></div>
                    <div>Any notice copy, society letter or other supporting document.</div>
                  </div>
                </div>
                <input type="file" id="docUpload" multiple>
              </div>
            </div>

            <!-- Remarks & Submission -->
            <div class="card-box">
              <div class="card-head">
                <div class="card-title">
                  <i class="bi bi-chat-square-text"></i> Final Remarks for Manager
                </div>
                <span class="mini-pill">What should manager know?</span>
              </div>

              <div class="mb-2">
                <label class="form-label-sm">Agent Remarks (required)</label>
                <textarea class="form-control form-control-sm textarea-sm" id="agentRemarks"
                          placeholder="Write a brief summary of your visit, any positive/negative points, occupancy status, mismatch if any, etc."></textarea>
              </div>

              <div class="mb-2">
                <label class="form-label-sm">Visit Outcome (Your suggestion)</label>
                <select class="form-select form-select-sm" id="visitOutcome">
                  <option value="">Select outcome</option>
                  <option value="recommend-approve">Recommend – Property acceptable</option>
                  <option value="recommend-cautious">Recommend with caution / conditions</option>
                  <option value="recommend-reject">Recommend reject – High risk</option>
                </select>
              </div>

              <div class="d-flex align-items-center justify-content-between mt-2">
                <div>
                  <span class="badge-status-small bs-draft" id="reportStatus">
                    <i class="bi bi-pencil-square"></i> Draft not yet submitted
                  </span>
                  <div class="subtext mt-1">
                    <i class="bi bi-info-circle"></i>
                    Once you mark as Verified / Not OK / Need Clarification, report will be sent to manager.
                  </div>
                </div>
                <button class="btn-sm-pill btn-start" id="btnSaveDraft">
                  <i class="bi bi-save"></i> Save Draft
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>

<!-- Toast notification -->
<div class="toast-box" id="toastBox">
  <i class="bi bi-check2-circle"></i>
  <div>
    <div id="toastTitle" style="font-weight:600;">Report submitted</div>
    <div id="toastText">Your verification report has been sent to the manager.</div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {

    const visitCards = document.querySelectorAll('.visit-card');
    const caseTitle  = document.getElementById('caseTitle');
    const caseSub    = document.getElementById('caseSub');
    const applicantName = document.getElementById('applicantName');
    const loanType   = document.getElementById('loanType');
    const loanAmount = document.getElementById('loanAmount');
    const visitTime  = document.getElementById('visitTime');
    const propType   = document.getElementById('propType');
    const propProject= document.getElementById('propProject');
    const propArea   = document.getElementById('propArea');
    const propAddress= document.getElementById('propAddress');

    const btnStartVisit = document.getElementById('btnStartVisit');
    const btnMarkVerified = document.getElementById('btnMarkVerified');
    const btnMarkNotOk = document.getElementById('btnMarkNotOk');
    const btnNeedClarification = document.getElementById('btnNeedClarification');
    const btnSaveDraft = document.getElementById('btnSaveDraft');

    const visitStatusBadge = document.getElementById('visitStatusBadge');
    const visitStatusInProgress = document.getElementById('visitStatusInProgress');
    const visitStatusCompleted = document.getElementById('visitStatusCompleted');
    const reportStatus = document.getElementById('reportStatus');

    const toastBox = document.getElementById('toastBox');
    const toastTitle = document.getElementById('toastTitle');
    const toastText  = document.getElementById('toastText');

    const agentRemarks = document.getElementById('agentRemarks');
    const visitOutcome = document.getElementById('visitOutcome');

    // Demo dataset for visits
    const visitData = {
      "1":{
        title:"Visit: Himanshu Shelke – Bavdhan",
        sub:"Application #APP-2025-00128 · Home Loan · Residential Property",
        applicant:"Himanshu Shelke",
        loanType:"Home Loan – Property",
        amount:"₹ 25,00,000",
        time:"Today · 3:30 PM",
        propType:"Residential Flat",
        project:"Skyline Residency · Wing B",
        area:"980 sq.ft",
        address:"Bavdhan, Pune – 411021"
      },
      "2":{
        title:"Visit: Arshad Shaikh – Kothrud",
        sub:"Application #APP-2025-00130 · Business Loan · Shop",
        applicant:"Arshad Shaikh",
        loanType:"Business Loan – Shop (Collateral)",
        amount:"₹ 18,00,000",
        time:"Today · 12:00 PM",
        propType:"Ground Floor Retail Shop",
        project:"Corner Plaza · Shop No. 3",
        area:"420 sq.ft",
        address:"Kothrud, Pune – 411038"
      },
      "3":{
        title:"Visit: Jyoti Chougale – Satara Land",
        sub:"Application #APP-2025-00132 · Home Loan · Open Land",
        applicant:"Jyoti Chougale",
        loanType:"Home Loan – Land",
        amount:"₹ 12,00,000",
        time:"Yesterday · 5:40 PM",
        propType:"Agricultural Land (1.5 acre)",
        project:"Village outskirts plot",
        area:"1.5 acre",
        address:"Satara District – Maharashtra"
      }
    };

    // Load selected visit details
    visitCards.forEach(card => {
      card.addEventListener('click', () => {
        visitCards.forEach(c => c.classList.remove('active'));
        card.classList.add('active');

        const id = card.getAttribute('data-id');
        const data = visitData[id];

        caseTitle.textContent = data.title;
        caseSub.textContent   = data.sub;
        applicantName.textContent = data.applicant;
        loanType.textContent  = data.loanType;
        loanAmount.textContent= data.amount;
        visitTime.textContent = data.time;
        propType.textContent  = data.propType;
        propProject.textContent = data.project;
        propArea.textContent  = data.area;
        propAddress.textContent = data.address;

        // Reset status view for demo (in real app, load from backend)
        visitStatusBadge.classList.remove('d-none');
        visitStatusInProgress.classList.add('d-none');
        visitStatusCompleted.classList.add('d-none');
        btnStartVisit.classList.remove('active');
        reportStatus.innerHTML = '<i class="bi bi-pencil-square"></i> Draft not yet submitted';
        reportStatus.className = 'badge-status-small bs-draft';
      });
    });

    function showToast(title,text,color="success"){
      toastTitle.textContent = title;
      toastText.textContent  = text;
      if(color === "danger"){
        toastBox.style.background = "#dc2626";
        toastBox.style.boxShadow  = "0 8px 20px rgba(220,38,38,.6)";
      }else if(color === "warning"){
        toastBox.style.background = "#f59e0b";
        toastBox.style.boxShadow  = "0 8px 20px rgba(245,158,11,.6)";
      }else{
        toastBox.style.background = "#16a34a";
        toastBox.style.boxShadow  = "0 8px 20px rgba(22,163,74,.6)";
      }

      toastBox.style.display = "flex";
      setTimeout(() => { toastBox.style.display = "none"; }, 2500);
    }

    // Start visit
    btnStartVisit.addEventListener('click', () => {
      btnStartVisit.classList.toggle('active');
      const active = btnStartVisit.classList.contains('active');

      if(active){
        visitStatusBadge.classList.add('d-none');
        visitStatusInProgress.classList.remove('d-none');
        showToast("Visit started", "Status updated to 'In progress'.", "success");
      }else{
        visitStatusBadge.classList.remove('d-none');
        visitStatusInProgress.classList.add('d-none');
      }
    });

    function validateReportBase(){
      if(!agentRemarks.value.trim()){
        showToast("Remarks required", "Please enter your site visit remarks before submitting.", "warning");
        return false;
      }
      if(!visitOutcome.value){
        showToast("Outcome required", "Please select your suggested outcome for this visit.", "warning");
        return false;
      }
      return true;
    }

    function markSubmitted(statusText,colorType){
      visitStatusInProgress.classList.add('d-none');
      visitStatusBadge.classList.add('d-none');
      visitStatusCompleted.classList.remove('d-none');

      reportStatus.textContent = statusText;
      reportStatus.className = 'badge-status-small bs-sent';

      showToast("Report submitted", statusText + " · Sent to Manager.", colorType);
    }

    // Mark Verified
    btnMarkVerified.addEventListener('click', () => {
      if(!validateReportBase()) return;
      markSubmitted("Report: Verified – Property acceptable.","success");
    });

    // Mark Not OK
    btnMarkNotOk.addEventListener('click', () => {
      if(!validateReportBase()) return;
      markSubmitted("Report: Not OK – Negative findings.","danger");
    });

    // Need Clarification
    btnNeedClarification.addEventListener('click', () => {
      if(!validateReportBase()) return;
      markSubmitted("Report: Need clarification – send back to UW/Manager.","warning");
    });

    // Save Draft (front-end only)
    btnSaveDraft.addEventListener('click', () => {
      reportStatus.textContent = "Draft saved (not yet submitted)";
      reportStatus.className = 'badge-status-small bs-draft';
      showToast("Draft saved", "Your notes and selections are saved (local demo).", "success");
    });
  });
</script>

</body>
</html>
